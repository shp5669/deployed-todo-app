{"ast":null,"code":"import{useState}from'react';import{useCookies}from'react-cookie';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const Modal=_ref=>{let{mode,setShowModal,getData,task}=_ref;const[cookies,setCookie,removeCookie]=useCookies(null);const editMode=mode==='edit'?true:false;const[data,setData]=useState({user_email:editMode?task.user_email:cookies.Email,title:editMode?task.title:null,progress:editMode?task.progress:50,date:editMode?task.date:new Date()});const postData=async e=>{e.preventDefault();try{const response=await fetch(`${process.env.REACT_APP_SERVERURL}/todos`,{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});if(response.status===200){console.log('WORKED');setShowModal(false);getData();}}catch(err){console.error(err);}};const editData=async e=>{e.preventDefault();try{const response=await fetch(`${process.env.REACT_APP_SERVERURL}/todos/${task.id}`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});if(response.status===200){setShowModal(false);getData();}}catch(err){console.error(err);}};const handleChange=e=>{const{name,value}=e.target;setData(data=>({...data,[name]:value}));console.log(data);};return/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-title-container\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Let's \",mode,\" your task\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowModal(false),children:\"X\"})]}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{required:true,maxLength:30,placeholder:\" Your task goes here\",name:\"title\",value:data.title,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{for:\"range\",children:\"Drag to select your current progress\"}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"range\",id:\"range\",min:\"0\",max:\"100\",name:\"progress\",value:data.progress,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:mode,type:\"submit\",onClick:editMode?editData:postData})]})]})});};export default Modal;","map":{"version":3,"names":["useState","useCookies","jsxs","_jsxs","jsx","_jsx","Modal","_ref","mode","setShowModal","getData","task","cookies","setCookie","removeCookie","editMode","data","setData","user_email","Email","title","progress","date","Date","postData","e","preventDefault","response","fetch","process","env","REACT_APP_SERVERURL","method","headers","body","JSON","stringify","status","console","log","err","error","editData","id","handleChange","name","value","target","className","children","onClick","required","maxLength","placeholder","onChange","for","type","min","max"],"sources":["/Users/seanpark/Desktop/Sean/deployed-todo-app/client/src/components/Modal.js"],"sourcesContent":["import { useState } from 'react'\nimport { useCookies } from 'react-cookie'\n\nconst Modal = ({ mode, setShowModal, getData, task }) => {\n  const [cookies, setCookie, removeCookie] = useCookies(null)\n  const editMode = mode === 'edit' ? true : false\n\n  const [data, setData] = useState({\n    user_email: editMode ? task.user_email : cookies.Email,\n    title: editMode ? task.title : null,\n    progress: editMode ? task.progress : 50,\n    date: editMode ? task.date : new Date()\n  })\n\n  const postData = async (e) => {\n    e.preventDefault()\n    try {\n      const response = await fetch(`${process.env.REACT_APP_SERVERURL}/todos`, {\n        method: \"POST\",\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data)\n      })\n      if (response.status === 200) {\n        console.log('WORKED')\n        setShowModal(false)\n        getData()\n      }\n\n    } catch(err) {\n      console.error(err)\n    }\n  }\n\n\n  const editData = async(e) => {\n    e.preventDefault()\n    try {\n      const response = await fetch(`${process.env.REACT_APP_SERVERURL}/todos/${task.id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data)\n      })\n      if (response.status === 200) {\n        setShowModal(false)\n        getData()\n      }\n    } catch (err) {\n      console.error(err)\n    }\n  }\n\n  \n\n  const handleChange = (e) => {\n    const { name, value } = e.target\n    \n    setData(data => ({\n      ...data,\n      [name] : value\n    }))\n\n    console.log(data)\n\n  }\n\n  return (\n    <div className=\"overlay\">\n      <div className=\"modal\">\n        <div className=\"form-title-container\">\n          <h3>Let's {mode} your task</h3>\n          <button onClick={() => setShowModal(false)}>X</button>\n        </div>\n\n        <form>\n          <input\n            required\n            maxLength={30}\n            placeholder=\" Your task goes here\"\n            name=\"title\"\n            value={data.title}\n            onChange={handleChange}\n          />\n          <br />\n          <label for=\"range\">Drag to select your current progress</label>\n          <input\n            required\n            type=\"range\"\n            id=\"range\"\n            min=\"0\"\n            max=\"100\"\n            name=\"progress\"\n            value={data.progress}\n            onChange={handleChange}\n          />\n          <input className={mode} type=\"submit\" onClick={editMode ? editData: postData} />\n        </form>\n\n      </div>\n    </div>\n  )\n}\n\nexport default Modal"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}